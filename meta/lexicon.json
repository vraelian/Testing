{
  "project_info": {
    "project_name": "Orbital Trading",
    "synopsis": "A single-player, persistent browser game about interstellar arbitrage trading and capital accumulation.",
    "core_mechanics": [
      "arbitrage_trading",
      "ship_progression",
      "procedural_events",
      "debt_management",
      "wealth_milestones",
      "deal-on-demand intel",
      "modular_ship_upgrades",
      "station_quirks",
      "sol_station_management"
    ],
    "gameplay_loop": "Player travels between locations -> trades commodities based on market prices -> uses profits to upgrade ship and pay debt -> unlocks new locations/commodities -> repeats."
  },
  "key_concepts": {
    "Sol_Station": "The endgame 'Engine'. A sovereign station orbiting the Sun that consumes vast amounts of commodities to generate Antimatter and Credits.",
    "Entropy_Mode": "The operational state of the Sol Station (Stability, Commerce, Production). Determines the trade-off between resource consumption (Decay) and output generation.",
    "Cache_Decay": "The daily loss of stored commodities at the Sol Station, driven by solar entropy. Must be countered by player donations.",
    "Antimatter": "A Tier 7 commodity generated exclusively by the Sol Station. Used for extreme wealth generation or high-tier crafting.",
    "Market_Pressure": "A value representing recent player trading activity for a commodity at a specific location. This value is now used exclusively to influence a market's 'targetStock' for replenishment, simulating the market adapting to new supply/demand.",
    "Galactic_Average": "The baseline, long-term average price for a commodity across the entire system. Market prices tend to revert to this average over time.",
    "Wealth_Milestones": "Specific credit thresholds that, when reached by the player, unlock higher tiers of commodities for trading, gating progression.",
    "Random_Events": "Procedurally triggered events that can occur during travel, presenting the player with choices that have various risks and rewards.",
    "Local_Data_Broker": "The 'Intel Market' tab on the Intel screen. A location-gated 'shop' where players can purchase Intel Packets.",
    "Intel_Packet": "A purchasable data object that creates a temporary, guaranteed market deal (e.g., a commodity at 40% off).",
    "One-Deal_Lock": "A core mechanic where the player can only have one active intel deal at a time, forcing a strategic choice.",
    "Ship_Upgrade": "A modular enhancement (e.g., 'Hyper-Combustor') that can be installed into a ship's slot. Unlike the deprecated 'Attributes', upgrades have a credit value that increases the ship's resale price.",
    "Upgrade_Capacity": "The hard limit of three (3) upgrade slots available on every ship. This constraint forces strategic choices via 'Destructive Replacement'.",
    "Destructive_Replacement": "The mechanic where installing a new upgrade into a full ship requires the permanent destruction (dismantling) of an existing upgrade. The old upgrade provides no refund.",
    "Station_Quirk": "A unique, static economic rule applied to a specific location (e.g., 'Venus Data Haven'). These quirks provide permanent bonuses or penalties to prices, services, or mechanics at that station.",
    "Directorate": "The roster of officers assigned to the Sol Station. Each assigned officer provides passive buffs to Entropy reduction, Credit yield, or Antimatter generation.",
    "Station_Integrity": "The overall health percentage of the Sol Station, calculated as the average fill ratio of all Maintenance Caches. Efficiency drops significantly below 50%.",
    "Maintenance_Cache": "A specific storage container for a commodity (e.g., Water Ice, Plasteel) at the Sol Station. These decay daily and must be replenished by player donations to maintain Station Integrity."
  },
  "service_summaries": {
    "SolStationService": {
      "description": "Manages the logic for the Sol Station endgame engine. Handles daily entropy decay calculations, resource consumption from caches, and the generation of Antimatter/Credits based on the active mode.",
      "dependencies": [
        "GameState",
        "Logger"
      ],
      "key_functions": {
        "processTick": "Calculates daily decay and output generation.",
        "setMode": "Switches the station's operating mode (Stability/Commerce/Production).",
        "donateToCache": "Transfers cargo from player ship to station maintenance caches.",
        "calculateEntropy": "Determines the current decay multiplier."
      },
      "mutates_state": [
        "solStation"
      ]
    },
    "GameState": {
      "description": "The single source of truth for all mutable game data. It holds the current state and notifies other services of changes.",
      "dependencies": [],
      "key_functions": {
        "setState": "Merges a partial state object into the main state and notifies subscribers.",
        "getState": "Returns a deep copy of the current game state.",
        "startNewGame": "Initializes the entire game state for a new session.",
        "subscribe": "Allows other services (primarily UIManager) to listen for state changes."
      },
      "mutates_state": [
        "day",
        "currentLocationId",
        "player",
        "market",
        "missions",
        "tutorials",
        "introSequenceActive",
        "uiState",
        "intelMarket",
        "activeIntelDeal",
        "solStation"
      ]
    },
    "SimulationService": {
      "description": "The core game engine **Facade**. It instantiates and coordinates all specialized services. It receives calls from the EventManager and delegates them to the appropriate service. It also hosts shared helper methods needed by multiple services.",
      "dependencies": [
        "GameState",
        "UIManager",
        "Logger",
        "MarketService",
        "TimeService",
        "TravelService",
        "IntroService",
        "PlayerActionService",
        "TutorialService",
        "MissionService",
        "NewsTickerService",
        "IntelService",
        "SolStationService",
        "js/services/ui/AnimationService.js"
      ],
      "key_functions": {
        "constructor": "Instantiates all specialized services.",
        "setScreen": "Sets the active navigation tab and screen.",
        "travelTo": "Facade method that delegates to TravelService.",
        "buyItem": "Facade method that delegates to PlayerActionService.",
        "pushNewsMessage": "Facade method to push a message to the NewsTickerService.",
        "buyShip": "Orchestrates the ship purchase flow: validates, awaits the UI animation, then executes the PlayerActionService logic.",
        "sellShip": "Orchestrates the ship sale flow: validates, awaits the UI animation, then executes the PlayerActionService logic."
      },
      "mutates_state": [
        "activeNav",
        "activeScreen",
        "isGameOver",
        "uiState"
      ]
    },
    "IntroService": {
      "description": "Manages the entire new game introduction sequence, from the initial lore modals to the final tutorial kickoff.",
      "dependencies": [
        "GameState",
        "UIManager",
        "Logger",
        "SimulationService (Facade)"
      ],
      "key_functions": {
        "start": "Begins the intro sequence.",
        "handleIntroClick": "Handles clicks on intro-specific buttons.",
        "continueAfterTutorial": "Resumes the intro sequence after a tutorial batch is completed."
      },
      "mutates_state": [
        "player.introStep",
        "player.name",
        "player.debt",
        "introSequenceActive"
      ]
    },
    "PlayerActionService": {
      "description": "Manages all direct, player-initiated actions that have an immediate effect, such as buying/selling commodities, purchasing ships, installing upgrades, and using station services.",
      "dependencies": [
        "GameState",
        "UIManager",
        "MissionService",
        "MarketService",
        "TimeService",
        "Logger",
        "SimulationService (Facade)",
        "GameAttributes"
      ],
      "key_functions": {
        "buyItem": "Handles the logic for purchasing a commodity.",
        "sellItem": "Handles the logic for selling a commodity.",
        "validateBuyShip": "Validates if a ship purchase is possible.",
        "executeBuyShip": "Executes the state changes for purchasing a ship.",
        "validateSellShip": "Validates if a ship sale is possible.",
        "executeSellShip": "Executes the state changes for selling a ship, including dynamic upgrade value calculation.",
        "refuelTick": "Processes one 'tick' of refueling.",
        "executeInstallUpgrade": "Installs an upgrade to the active ship, handling the Destructive Replacement logic and state mutation."
      },
      "mutates_state": [
        "player.credits",
        "player.debt",
        "player.inventories",
        "player.shipStates",
        "player.ownedShipIds",
        "market.inventory"
      ]
    },
    "GameAttributes": {
      "description": "The Upgrade Registry. Defines the metadata (name, cost, description, visual style) for all Ship Upgrades and Station Quirks. Acts as a rule engine for modifiers, supporting both Additive (Capacity) and Multiplicative (Rate) logic.",
      "dependencies": [],
      "key_functions": {
        "getDefinition": "Returns the static definition object for a given Upgrade ID.",
        "getServiceCostModifier": "Calculates service cost multipliers based on installed upgrades.",
        "getPriceModifier": "Calculates market price modifiers based on installed upgrades.",
        "getEventChanceModifier": "Calculates flat additive bonuses to event probability.",
        "getStationQuirks": "Returns the list of active quirks for a given location ID."
      },
      "mutates_state": []
    },
    "TravelService": {
      "description": "Handles all aspects of interstellar travel, including initiating trips, calculating costs, and managing the random event system during transit. Draws event data from `js/data/events.js` facade.",
      "dependencies": [
        "GameState",
        "UIManager",
        "TimeService",
        "Logger",
        "SimulationService (Facade)",
        "RandomEventService",
        "js/services/eventEffectResolver.js"
      ],
      "key_functions": {
        "travelTo": "Validates and begins travel to a new location.",
        "initiateTravel": "Executes the core travel logic, consuming fuel and time.",
        "resumeTravel": "Continues a pending travel action after an event."
      },
      "mutates_state": [
        "pendingTravel",
        "player.shipStates.health",
        "player.shipStates.fuel"
      ]
    },
    "TimeService": {
      "description": "Responsible for advancing the game clock (`advanceDays`) and triggering all time-based events like birthdays, debt interest charges, and weekly market updates. Draws age event data from `js/data/age_events.js`. Also checks for `activeIntelDeal` expiration and triggers the `IntelService` refresh.",
      "dependencies": [
        "GameState",
        "MarketService",
        "UIManager",
        "Logger",
        "SimulationService (Facade)",
        "js/data/age_events.js",
        "IntelService",
        "SolStationService"
      ],
      "key_functions": {
        "advanceDays": "Advances game time and triggers all associated daily, weekly, and monthly logic."
      },
      "mutates_state": [
        "day",
        "player.playerAge",
        "player.debt",
        "player.shipStates.health",
        "market.prices",
        "market.inventory",
        "activeIntelDeal",
        "solStation"
      ]
    },
    "MarketService": {
      "description": "Handles the simulation of the in-game economy, including price evolution, inventory replenishment, and applying market pressure from player trades. Its `getPrice` logic is modified to check for `activeIntelDeal` overrides, apply Station Quirks, and apply player-specific `applyModifiers` (e.g. Signal Hacker).",
      "dependencies": [
        "GameState",
        "IntelService"
      ],
      "key_functions": {
        "evolveMarketPrices": "Simulates daily price changes for all commodities.",
        "replenishMarketInventory": "Handles the weekly restocking of all markets.",
        "applyMarketImpact": "Adjusts market pressure based on player buy/sell actions.",
        "_updateShipyardStock": "Updates the available ships for sale at each location.",
        "getPrice": "Gets the price, checking for Intel overrides, Station Quirks, and Upgrade modifiers."
      },
      "mutates_state": [
        "market.prices",
        "market.inventory",
        "market.shipyardStock"
      ]
    },
    "RandomEventService": {
      "description": "The high-level coordinator for Event System 2.0. Determines if an event occurs and selects one using the registry facade.",
      "dependencies": ["GameState", "ConditionEvaluator", "js/data/events.js"],
      "key_functions": {
        "tryTriggerEvent": "Evaluates context tags and conditions to select a valid event.",
        "resolveChoice": "Processes the player's decision via OutcomeResolver."
      },
      "mutates_state": []
    },
    "ConditionEvaluator": {
      "description": "Stateless utility for Event System 2.0. Validates `requirements` arrays against GameState.",
      "dependencies": ["GameState"],
      "key_functions": {
        "checkAll": "Returns true if all conditions in a list are met."
      },
      "mutates_state": []
    },
    "OutcomeResolver": {
      "description": "Stateless utility for Event System 2.0. Determines the result of a choice (Deterministic vs. Weighted RNG).",
      "dependencies": ["GameState"],
      "key_functions": {
        "resolve": "Returns a specific outcome ID based on the resolution strategy."
      },
      "mutates_state": []
    },
    "DynamicValueResolver": {
      "description": "Stateless utility for Event System 2.0. Converts abstract value definitions (e.g., scaleWith: 'MAX_FUEL') into concrete integers.",
      "dependencies": ["GameState", "DB"],
      "key_functions": {
        "resolve": "Calculates the final numeric value for an effect."
      },
      "mutates_state": []
    },
    "IntelService": {
      "description": "The 'brain' of the Intel system. Manages the lifecycle of intel: generation, persistence, dynamic pricing logic, and the purchase transaction.",
      "dependencies": [
        "GameState",
        "TimeService",
        "MarketService",
        "NewsTickerService",
        "js/data/intelContent.js",
        "DB"
      ],
      "key_functions": {
        "generateIntelRefresh": "Called by TimeService to repopulate intel markets.",
        "calculateIntelPrice": "Dynamically calculates intel price based on player credits and deal value.",
        "purchaseIntel": "Validates and executes the purchase, creating an 'activeIntelDeal'."
      },
      "mutates_state": [
        "intelMarket",
        "activeIntelDeal",
        "player.credits"
      ]
    },
    "UIManager": {
      "description": "The master 'Switchboard' Facade. Instantiates and coordinates the 7 Domain Controllers (`UIModalEngine`, `UITutorialManager`, `UIMarketControl`, `UIMissionControl`, `UIHangarControl`, `UIEventControl`, `UISolStationControl`). Responsible for the main render loop and proxying logic to delegates.",
      "dependencies": [
        "Logger",
        "EffectsManager",
        "TravelAnimationService",
        "UIModalEngine",
        "UITutorialManager",
        "UIMarketControl",
        "UIMissionControl",
        "UIHangarControl",
        "UIEventControl",
        "UISolStationControl"
      ],
      "key_functions": {
        "render": "The main function that orchestrates the re-drawing of all UI components.",
        "queueModal": "Proxy to UIModalEngine.",
        "updateMarketScreen": "Proxy to UIMarketControl.",
        "showShipDetailModal": "Proxy to UIHangarControl.",
        "showRandomEventModal": "Proxy to UIEventControl.",
        "showGenericTooltip": "Shows a contextual tooltip with dynamic 'right' or 'top' orientation."
      },
      "mutates_state": []
    },
    "UIModalEngine": {
      "description": "Domain Controller responsible for the modal lifecycle. Manages the global modal queue, priority processing, and DOM manipulation for showing/hiding modals.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "queueModal": "Adds a modal to the queue.",
        "processModalQueue": "Displays the next modal.",
        "hideModal": "Removes the active modal."
      }
    },
    "UITutorialManager": {
      "description": "Domain Controller responsible for the interactive tutorial system. Encapsulates Popper.js logic for positioning toasts and managing highlight overlays.",
      "dependencies": ["UIManager (Facade)", "Popper.js"],
      "key_functions": {
        "showTutorialToast": "Renders a tutorial step.",
        "applyTutorialHighlight": "Draws SVG highlights over target elements."
      }
    },
    "UIMarketControl": {
      "description": "Domain Controller responsible for the Market screen. Manages high-frequency rendering, input state retention, and SVG graph generation.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "updateMarketScreen": "Renders the market list.",
        "renderPriceGraph": "Generates SVG for price history.",
        "_saveMarketTransactionState": "Preserves input values during re-renders."
      }
    },
    "UIMissionControl": {
      "description": "Domain Controller responsible for the Data tab (Missions & Intel). Manages the sticky bar HUD and Intel Broker interactions.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "renderStickyBar": "Updates the mission HUD.",
        "handleBuyIntel": "Processes intel purchases."
      }
    },
    "UIHangarControl": {
      "description": "Domain Controller responsible for Ship assets. Manages the Hangar/Shipyard carousel, pagination, and the Upgrade Installation flow.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "updateHangarScreen": "Updates carousel position and lazy loading.",
        "showUpgradeInstallationModal": "Manages the triple-confirmation flow for upgrades."
      }
    },
    "UIEventControl": {
      "description": "Domain Controller responsible for 'World' interactions. Handles Random Events, Map Details, Lore, and Launch modals.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "showRandomEventModal": "Renders an event choice.",
        "showMapDetailModal": "Shows location details."
      }
    },
    "UISolStationControl": {
      "description": "Domain Controller responsible for the Sol Station Dashboard, managing the Mode Lever, Cache Grid, and Officer Directorate UI.",
      "dependencies": ["UIManager (Facade)"],
      "key_functions": {
        "showDashboard": "Builds and displays the main Sol Station Dashboard modal.",
        "update": "Surgically updates the values in the existing dashboard without re-rendering.",
        "showOfficerRoster": "Renders the Officer Roster IN-PLACE (Sub-view)."
      }
    },
    "AssetStorageService": {
      "description": "Low-level IndexedDB wrapper. Manages the 'OrbitalAssetsDB' to store raw `Blob` data, preventing iOS cache eviction.",
      "dependencies": [],
      "key_functions": {
        "saveAsset": "Stores a blob in IDB.",
        "getAsset": "Retrieves a blob from IDB."
      },
      "mutates_state": []
    },
    "IntelMarketRenderer": {
      "description": "A dedicated renderer class. Its sole job is to be called by UIManager (via UIMissionControl) to dynamically build the HTML for the content of the 'Intel Market' tab.",
      "dependencies": [
        "UIManager",
        "GameState",
        "IntelService",
        "DB"
      ],
      "key_functions": {
        "render": "Builds and injects the HTML for the Intel Market."
      },
      "mutates_state": []
    },
    "NewsTickerService": {
      "description": "Manages the dynamic message queue for the scrolling news ticker. Handles different message types (SYSTEM, INTEL, FLAVOR, ALERT, STATUS), rebuilds the queue on location change, and pulls data from various sources. Is a primary driver for the Intel system.",
      "dependencies": [
        "GameState",
        "js/data/flavorAds.js",
        "js/data/intelMessages.js",
        "js/data/database.js"
      ],
      "key_functions": {
        "pushMessage": "Adds a new, non-duplicate message to the ticker queue and sets the dirty flag.",
        "pulse": "Called daily by TimeService; currently stubbed, logic moved to `onLocationChange`.",
        "getTickerContentHtml": "Returns the complete HTML string for the UIManager to render, generating live data (like STATUS) on the fly.",
        "onLocationChange": "Rebuilds the entire default message queue (welcome, intel, ads, status) when the player arrives at a new location.",
        "setServices": "Injects MarketService and SimulationService for generating dynamic intel and status messages."
      },
      "mutates_state": []
    },
    "EventManager": {
      "description": "The universal input layer. Instantiates specialized handlers, binds global listeners, and delegates event handling to the appropriate module.",
      "dependencies": [
        "GameState",
        "SimulationService",
        "UIManager",
        "TutorialService",
        "DebugService",
        "Logger"
      ],
      "key_functions": {
        "bindEvents": "Sets up all global event listeners for the application.",
        "_handleClick": "The central delegated click handler that routes events to the appropriate handler module, now async to support awaiting animated actions."
      },
      "mutates_state": []
    },
    "ActionClickHandler": {
      "description": "Handles general `data-action` click events, such as navigation, modal triggers, and simple state changes. Now also handles Intel Market actions and Upgrade Installation.",
      "dependencies": [
        "GameState",
        "SimulationService",
        "UIManager",
        "TutorialService"
      ],
      "key_functions": {
        "handle": "Processes a click event on an element with a `data-action` attribute, now an async function to await promise-based actions like animated ship purchases."
      },
      "mutates_state": []
    },
    "MarketEventHandler": {
      "description": "Manages all interactions within a market commodity card, including mode toggling, quantity changes, and trade confirmations.",
      "dependencies": [
        "GameState",
        "SimulationService",
        "UIManager"
      ],
      "key_functions": {
        "handleClick": "Handles clicks on market card controls.",
        "handleInput": "Handles direct input into the quantity field."
      },
      "mutates_state": []
    },
    "HoldEventHandler": {
      "description": "Manages 'hold-to-act' functionality (e.g., Refuel/Repair) using a persistent, capture-phase Pointer Event model to remain stable through UI re-renders.",
      "dependencies": [
        "PlayerActionService",
        "UIManager"
      ],
      "key_functions": {
        "bindHoldEvents": "Binds persistent 'pointerdown', 'pointerup', and 'pointercancel' listeners.",
        "_handleInteractionStart": "Master 'start' handler that delegates to specific actions.",
        "_handleInteractionStop": "Master 'stop' handler that stops any active action."
      },
      "mutates_state": []
    },
    "CarouselEventHandler": {
      "description": "Encapsulates all logic for the drag, swipe, and scroll functionality of the hangar/shipyard carousel.",
      "dependencies": [
        "GameState",
        "SimulationService"
      ],
      "key_functions": {
        "handleDragStart": "Initiates a drag sequence.",
        "handleDragMove": "Updates the carousel during a drag.",
        "handleDragEnd": "Concludes a drag sequence and snaps to a page.",
        "handleWheel": "Handles mouse wheel scrolling."
      },
      "mutates_state": []
    },
    "TooltipHandler": {
      "description": "Manages the display and lifecycle of tooltips, price graphs, and other contextual pop-ups. Now handles ship attribute tooltip state and mobile responsive toggles.",
      "dependencies": [
        "GameState",
        "UIManager",
        "GameAttributes"
      ],
      "key_functions": {
        "handleClick": "Manages tooltip visibility on click, including stateful toggling for attribute pills.",
        "handleMouseOver": "Shows tooltips on hover.",
        "handleMouseOut": "Hides tooltips on hover out."
      },
      "mutates_state": []
    },
    "MissionService": {
      "description": "Manages the state, progression, and availability of player missions. Draws mission data from `js/data/missions.js`.",
      "dependencies": [
        "GameState",
        "UIManager",
        "Logger",
        "SimulationService",
        "js/data/missions.js"
      ],
      "key_functions": {
        "getAvailableMissions": "Returns a list of all missions whose prerequisites are met.",
        "acceptMission": "Sets a mission as active and initializes its progress tracking.",
        "checkTriggers": "Checks if the objectives for the active mission are met based on the current game state.",
        "completeActiveMission": "Grants rewards and updates mission state upon successful completion."
      },
      "mutates_state": [
        "missions.activeMissionId",
        "missions.completedMissionIds",
        "missions.missionProgress",
        "missions.activeMissionObjectivesMet"
      ]
    },
    "TutorialService": {
      "description": "Manages the state and flow of interactive tutorials. Draws tutorial data from `js/data/tutorials.js`.",
      "dependencies": [
        "GameState",
        "UIManager",
        "SimulationService",
        "Logger",
        "js/data/tutorials.js"
      ],
      "key_functions": {
        "checkState": "Checks game state/action against triggers/completion conditions.",
        "triggerBatch": "Starts a specific tutorial batch.",
        "advanceStep": "Moves to the next step in the current batch.",
        "skipActiveTutorial": "Skips the current tutorial batch."
      },
      "mutates_state": [
        "tutorials.activeBatchId",
        "tutorials.activeStepId",
        "tutorials.seenBatchIds",
        "tutorials.skippedTutorialBatches",
        "tutorials.navLock"
      ]
    },
    "DebugService": {
      "description": "Manages the debug panel (`lil-gui`), synchronizing its UI controls with the `GameState` and providing cheat/test functionalities. Now includes asset manipulation tools.",
      "dependencies": [
        "GameState",
        "SimulationService",
        "UIManager",
        "Logger"
      ],
      "key_functions": {
        "init": "Initializes the debug panel.",
        "toggleVisibility": "Toggles the visibility of the debug panel UI.",
        "generateBugReport": "Gathers and copies a bug report to the clipboard.",
        "godMode": "Activates God Mode (unlocks everything, infinite credits).",
        "cycleShipPics": "Increments the player's visualSeed to cycle through ship asset variants.",
        "boardShip": "Allows instant boarding of any ship for testing."
      },
      "mutates_state": [
        "player.credits",
        "player.visualSeed",
        "gameState (general)"
      ]
    },
    "TravelAnimationService": {
      "description": "Handles the rendering and animation logic for the travel sequence modal. It uses the Canvas API to create a dynamic visual representation of the journey.",
      "dependencies": [],
      "key_functions": {
        "play": "Starts the travel animation sequence."
      },
      "mutates_state": []
    },
    "AnimationService": {
      "description": "Provides a generic, promise-based utility (playBlockingAnimation) to run CSS animations and block further execution until the animation completes. Used for ship buy/sell transitions.",
      "dependencies": [],
      "key_functions": {
        "playBlockingAnimation": "Returns a promise that resolves on 'animationend' for a given element and CSS class."
      },
      "mutates_state": []
    },
    "MapScreen": {
      "description": "A UI component responsible for rendering the interactive D3.js solar system map.",
      "dependencies": [
        "UIManager"
      ],
      "key_functions": {
        "renderMapScreen": "Renders the initial container for the map.",
        "initMap": "Initializes the D3 map, drawing all celestial bodies and labels."
      },
      "mutates_state": []
    },
    "ViewController": {
      "description": "The native Swift code for the iOS wrapper. It is responsible for creating and configuring the WKWebView that hosts the entire web application. It also handles the communication bridge for debugging and is the key to the live-reload development workflow with the Xcode simulator.",
      "dependencies": [
        "WKWebView"
      ],
      "key_functions": {
        "viewDidLoad": "Initializes the web view, sets its constraints to fill the screen, and loads the game either from the local development server or the bundled files."
      },
      "mutates_state": []
    }
  },
  "asset_index": {
    "F001": {
      "path": "./index.html",
      "role": "DOCUMENT_ROOT"
    },
    "F003": {
      "path": "./js/main.js",
      "role": "ENTRY_POINT"
    },
    "F004": {
      "path": "./js/utils.js",
      "role": "UTILITY_LIBRARY"
    },
    "F005": {
      "path": "./js/data/constants.js",
      "role": "DATA_DEFINITION"
    },
    "F006": {
      "path": "./js/data/database.js",
      "role": "DATA_AGGREGATOR",
      "description": "Aggregates and exports static game data imported from other modules."
    },
    "F009": {
      "path": "./js/services/GameState.js",
      "role": "STATE_MANAGER"
    },
    "F010": {
      "path": "./js/services/simulation/MarketService.js",
      "role": "LOGIC_SERVICE",
      "dependencies": [
        "js/services/IntelService.js"
      ]
    },
    "F011": {
      "path": "./js/services/SimulationService.js",
      "role": "LOGIC_FACADE"
    },
    "F014": {
      "path": "./js/services/eventEffectResolver.js",
      "role": "LOGIC_SERVICE",
      "dependencies": [
        "js/data/events.js"
      ]
    },
    "F015": {
      "path": "./js/services/EventManager.js",
      "role": "EVENT_HANDLER"
    },
    "F016": {
      "path": "./js/services/TutorialService.js",
      "role": "LOGIC_SERVICE"
    },
    "F017": {
      "path": "./js/services/UIManager.js",
      "role": "UI_RENDERER",
      "dependencies": [
        "js/services/ui/UIModalEngine.js",
        "js/services/ui/UITutorialManager.js",
        "js/services/ui/UIMarketControl.js",
        "js/services/ui/UIMissionControl.js",
        "js/services/ui/UIHangarControl.js",
        "js/services/ui/UIEventControl.js",
        "js/services/ui/UISolStationControl.js"
      ]
    },
    "F018": {
      "path": "./js/services/MissionService.js",
      "role": "LOGIC_SERVICE"
    },
    "F019": {
      "path": "./js/ui/components/CargoScreen.js",
      "role": "UI_COMPONENT"
    },
    "F020": {
      "path": "./js/ui/components/FinanceScreen.js",
      "role": "UI_COMPONENT"
    },
    "F021": {
      "path": "./js/ui/components/HangarScreen.js",
      "role": "UI_COMPONENT"
    },
    "F022": {
      "path": "./js/ui/components/IntelScreen.js",
      "role": "UI_COMPONENT",
      "description": "Renders the static shell for the Intel screen (Codex and Intel Market tabs)."
    },
    "F023": {
      "path": "./js/ui/components/MarketScreen.js",
      "role": "UI_COMPONENT"
    },
    "F024": {
      "path": "./js/ui/components/MissionsScreen.js",
      "role": "UI_COMPONENT"
    },
    "F025": {
      "path": "./js/ui/components/NavigationScreen.js",
      "role": "UI_COMPONENT"
    },
    "F026": {
      "path": "./js/ui/components/ServicesScreen.js",
      "role": "UI_COMPONENT"
    },
    "F027": {
      "path": "./js/ui/components/StatusScreen.js",
      "role": "UI_COMPONENT",
      "status": "deprecated"
    },
    "F028": {
      "path": "./js/ui/components/MapScreen.js",
      "role": "UI_COMPONENT"
    },
    "F029": {
      "path": "./js/services/DebugService.js",
      "role": "DEBUG_TOOL"
    },
    "F030": {
      "path": "./js/services/LoggingService.js",
      "role": "DEBUG_TOOL"
    },
    "F031": {
      "path": "./js/effects/BaseEffect.js",
      "role": "LOGIC_MODULE"
    },
    "F032": {
      "path": "./js/effects/EffectsManager.js",
      "role": "LOGIC_SERVICE"
    },
    "F033": {
      "path": "./js/services/game/IntroService.js",
      "role": "LOGIC_SERVICE"
    },
    "F034": {
      "path": "./js/services/player/PlayerActionService.js",
      "role": "LOGIC_SERVICE",
      "dependencies": [
        "js/services/GameAttributes.js"
      ]
    },
    "F035": {
      "path": "./js/services/world/TimeService.js",
      "role": "LOGIC_SERVICE",
      "dependencies": [
        "js/services/IntelService.js",
        "js/services/SolStationService.js"
      ]
    },
    "F036": {
      "path": "./js/services/world/TravelService.js",
      "role": "LOGIC_SERVICE"
    },
    "F037": {
      "path": "./meta/ROADMAP.md",
      "role": "DOCUMENTATION"
    },
    "F038": {
      "path": "./meta/ARCHITECTURAL_DECISIONS.md",
      "role": "DOCUMENTATION"
    },
    "F039": {
      "path": "./js/services/handlers/ActionClickHandler.js",
      "role": "EVENT_HANDLER",
      "dependencies": [
        "js/services/GameAttributes.js"
      ]
    },
    "F040": {
      "path": "./js/services/handlers/MarketEventHandler.js",
      "role": "EVENT_HANDLER"
    },
    "F041": {
      "path": "./js/services/handlers/HoldEventHandler.js",
      "role": "EVENT_HANDLER"
    },
    "F042": {
      "path": "./js/services/handlers/CarouselEventHandler.js",
      "role": "EVENT_HANDLER"
    },
    "F043": {
      "path": "./js/services/handlers/TooltipHandler.js",
      "role": "EVENT_HANDLER",
      "dependencies": [
        "js/services/GameAttributes.js"
      ]
    },
    "F044": {
      "path": "./js/services/ui/TravelAnimationService.js",
      "role": "UI_SERVICE"
    },
    "F045": {
      "path": "./css/orientation.css",
      "role": "STYLESHEET"
    },
    "F046": {
      "path": "ViewController.swift",
      "role": "NATIVE_IOS_WRAPPER"
    },
    "F047": {
      "path": "./meta/STATE_SCHEMA.md",
      "role": "DOCUMENTATION_STATE_SCHEMA"
    },
    "F048": {
      "path": "./meta/SERVICES.md",
      "role": "DOCUMENTATION_SERVICE_RESPONSIBILITY"
    },
    "F049": {
      "path": "./js/data/age_events.js",
      "role": "DATA_DEFINITION"
    },
    "F050": {
      "path": "./js/data/events.js",
      "role": "DATA_DEFINITION",
      "description": "Facade that aggregates modular event files."
    },
    "F051": {
      "path": "./js/data/missions.js",
      "role": "DATA_DEFINITION"
    },
    "F052": {
      "path": "./js/data/tutorials.js",
      "role": "DATA_DEFINITION",
      "description": "Facade that aggregates modular tutorial files."
    },
    "F053": {
      "path": "./js/services/NewsTickerService.js",
      "role": "UI_SERVICE"
    },
    "F054": {
      "path": "./js/data/flavorAds.js",
      "role": "DATA_DEFINITION",
      "description": "Defines location-specific flavor text for the news ticker."
    },
    "F055": {
      "path": "./css/news-ticker.css",
      "role": "STYLESHEET"
    },
    "F056": {
      "path": "./js/data/intelMessages.js",
      "role": "DATA_DEFINITION",
      "description": "Defines templates for market intel messages for the news ticker."
    },
    "F057": {
      "path": "./js/services/IntelService.js",
      "role": "LOGIC_SERVICE"
    },
    "F058": {
      "path": "./js/ui/renderers/IntelMarketRenderer.js",
      "role": "UI_RENDERER"
    },
    "F059": {
      "path": "./js/data/intelContent.js",
      "role": "DATA_DEFINITION",
      "description": "Defines sample/detail text for the Intel Market."
    },
    "F060": {
      "path": "./js/services/ui/AnimationService.js",
      "role": "UI_SERVICE"
    },
    "F061": {
      "path": "./js/services/bot/AutomatedPlayerService.js",
      "role": "AUTOMATION_SERVICE",
      "description": "Contains the AutomatedPlayer class, a bot for stress-testing the economy."
    },
    "F062": {
      "path": "./js/data/ship_database.js",
      "role": "DATA_DEFINITION",
      "description": "The single source of truth for all static ship data, imported by database.js."
    },
    "F063": {
      "path": "./js/services/event-effects/effectAdriftPassenger.js",
      "role": "LOGIC_MODULE",
      "description": "Contains the specific outcome logic for the 'Adrift Passenger' random event."
    },
    "F064": {
      "path": "./js/services/event-effects/effectSpaceRace.js",
      "role": "LOGIC_MODULE",
      "description": "Contains the specific outcome logic for the 'Space Race' random event."
    },
    "F065": {
      "path": "./js/services/AssetService.js",
      "role": "UTILITY_SERVICE",
      "description": "Centralizes logic for generating dynamic asset paths using the modulo variant system."
    },
    "F066": {
      "path": "./js/data/assets_config.js",
      "role": "DATA_DEFINITION",
      "description": "Configuration for ship asset variants."
    },
    "F067": {
      "path": "./publish_game.sh",
      "role": "BUILD_TOOL",
      "description": "Automated deployment script that orchestrates the 'borrow tools -> build -> deploy -> cleanup' workflow for the live OrbitalTrading repository."
    },
    "F068": {
      "path": "./js/data/eulaContent.js",
      "role": "DATA_DEFINITION",
      "description": "Defines the static HTML content for the EULA modal."
    },
    "F069": {
      "path": "./js/services/GameAttributes.js",
      "role": "LOGIC_SERVICE",
      "description": "The Upgrade Registry. Defines available upgrades, station quirks, and neutralizing legacy attribute logic."
    },
    "F070": {
      "path": "./js/services/AssetStorageService.js",
      "role": "UTILITY_SERVICE",
      "description": "Low-level IndexedDB wrapper for storing asset blobs."
    },
    "F071": {
      "path": "./js/services/ui/UIModalEngine.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages modal lifecycle and queue."
    },
    "F072": {
      "path": "./js/services/ui/UITutorialManager.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages tutorial toasts and overlays."
    },
    "F073": {
      "path": "./js/services/ui/UIMarketControl.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages Market screen and graphs."
    },
    "F074": {
      "path": "./js/services/ui/UIMissionControl.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages Missions, Sticky Bar, and Intel Broker."
    },
    "F075": {
      "path": "./js/services/ui/UIHangarControl.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages Hangar carousel and Upgrade installation."
    },
    "F076": {
      "path": "./js/services/ui/UIEventControl.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages World Events, Maps, and Lore."
    },
    "F077": {
      "path": "./js/services/RandomEventService.js",
      "role": "LOGIC_SERVICE",
      "description": "Coordinator for Event System 2.0."
    },
    "F078": {
      "path": "./js/services/OutcomeResolver.js",
      "role": "LOGIC_SERVICE",
      "description": "Resolves choice outcomes for events."
    },
    "F079": {
      "path": "./js/services/ConditionEvaluator.js",
      "role": "LOGIC_SERVICE",
      "description": "Evaluates requirements for events."
    },
    "F080": {
      "path": "./js/services/DynamicValueResolver.js",
      "role": "LOGIC_SERVICE",
      "description": "Calculates dynamic effect values."
    },
    "F081": {
      "path": "./js/data/events/events_traffic.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Traffic & Encounters."
    },
    "F082": {
      "path": "./js/data/events/events_entropy.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Systems & Maintenance."
    },
    "F083": {
      "path": "./js/data/events/events_hazards.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Environmental Hazards."
    },
    "F084": {
      "path": "./js/data/events/events_bureaucracy.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Legal & Customs."
    },
    "F085": {
      "path": "./js/data/events/events_logistics.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Cargo & Storage."
    },
    "F086": {
      "path": "./js/data/events/events_salvage.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Wrecks & Loot."
    },
    "F087": {
      "path": "./js/data/events/events_opportunity.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Trade deals."
    },
    "F088": {
      "path": "./js/data/events/events_story.js",
      "role": "DATA_DEFINITION",
      "description": "Modular event file: Unique narrative encounters."
    },
    "F089": {
      "path": "./js/data/tutorials/tuts_intro.js",
      "role": "DATA_DEFINITION",
      "description": "Modular tutorial file: Introduction sequence."
    },
    "F090": {
      "path": "./js/data/tutorials/tuts_economy.js",
      "role": "DATA_DEFINITION",
      "description": "Modular tutorial file: Economy & Market mechanics."
    },
    "F091": {
      "path": "./js/data/tutorials/tuts_progression.js",
      "role": "DATA_DEFINITION",
      "description": "Modular tutorial file: Ship upgrades & Progression."
    },
    "F092": {
      "path": "./js/data/lore/loreRegistry.js",
      "role": "DATA_DEFINITION",
      "description": "Facade that aggregates modular lore files."
    },
    "F093": {
      "path": "./js/data/lore/lore_broadstrokes.js",
      "role": "DATA_DEFINITION",
      "description": "Modular lore file: General world-building and history."
    },
    "F094": {
      "path": "./meta/MATH_REGISTRY.md",
      "role": "DOCUMENTATION"
    },
    "F095": {
      "path": "./meta/CODING_STANDARDS.md",
      "role": "DOCUMENTATION"
    },
    "F096": {
      "path": "./meta/UI_LIBRARY.md",
      "role": "DOCUMENTATION"
    },
    "F097": {
      "path": "./meta/LORE_COMPENDIUM.md",
      "role": "DOCUMENTATION"
    },
    "F098": {
      "path": "./js/services/SolStationService.js",
      "role": "LOGIC_SERVICE",
      "description": "Core logic for the Sol Station endgame engine."
    },
    "F099": {
      "path": "./js/services/ui/UISolStationControl.js",
      "role": "UI_CONTROLLER",
      "description": "Domain Controller: Manages the Sol Station Dashboard, Cache Grid, and Directorate UI."
    },
    "F100": {
      "path": "./js/data/officers.js",
      "role": "DATA_DEFINITION",
      "description": "Registry of Sol Station Directorate officers and their stats."
    }
  }
}